<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tips and Tricks | Orango</title>
    <meta name="description" content="ArangoDB Object Modeler for Node.js, Foxx and Web Browsers">
    <link rel="icon" href="/icons/favicon.ico">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#fd6602">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="#fd6602">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/mstile-150x150.png">
  <meta name="msapplication-TileColor" content="#fd6602">
    
    <link rel="preload" href="/assets/css/0.styles.c6f2c4ad.css" as="style"><link rel="preload" href="/assets/js/app.638713ad.js" as="script"><link rel="preload" href="/assets/js/22.c9e27b35.js" as="script"><link rel="preload" href="/assets/js/4.b7431d6a.js" as="script"><link rel="prefetch" href="/assets/js/12.bdb0900e.js"><link rel="prefetch" href="/assets/js/2.234811cb.js"><link rel="prefetch" href="/assets/js/3.b0961c5f.js"><link rel="prefetch" href="/assets/js/5.5d620026.js"><link rel="prefetch" href="/assets/js/6.e99efd1f.js"><link rel="prefetch" href="/assets/js/7.cabad610.js"><link rel="prefetch" href="/assets/js/8.8dd83b6a.js"><link rel="prefetch" href="/assets/js/9.e54f44c5.js"><link rel="prefetch" href="/assets/js/10.278ae628.js"><link rel="prefetch" href="/assets/js/11.799cf6c3.js"><link rel="prefetch" href="/assets/js/13.632cd73c.js"><link rel="prefetch" href="/assets/js/14.64c86a24.js"><link rel="prefetch" href="/assets/js/15.c36e301c.js"><link rel="prefetch" href="/assets/js/16.8cd163e8.js"><link rel="prefetch" href="/assets/js/17.a9f6ad9c.js"><link rel="prefetch" href="/assets/js/18.e71928be.js"><link rel="prefetch" href="/assets/js/19.c86cfc07.js"><link rel="prefetch" href="/assets/js/20.bb465aec.js"><link rel="prefetch" href="/assets/js/21.19999406.js"><link rel="prefetch" href="/assets/js/23.524ed88b.js"><link rel="prefetch" href="/assets/js/24.c3ee01c0.js"><link rel="prefetch" href="/assets/js/25.0bb3c8cc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c6f2c4ad.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/hero.png" alt="Orango" class="logo"> <span class="site-name can-hide">Orango</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/getting-started.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/api/" class="nav-link">API</a></div> <a href="https://github.com/roboncode/orango" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/getting-started.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/api/" class="nav-link">API</a></div> <a href="https://github.com/roboncode/orango" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/guide/getting-started.html" class="sidebar-link">Getting Started</a></li><li><a href="/guide/working-with-models.html" class="sidebar-link">Working with models</a></li><li><a href="/guide/best-practices.html" class="active sidebar-link">Tips and Tricks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/best-practices.html#referencing-orango-instance" class="sidebar-link">Referencing orango instance</a></li><li class="sidebar-sub-header"><a href="/guide/best-practices.html#performing-raw-aql-queries" class="sidebar-link">Performing raw AQL queries</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>API</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/api/orango.html" class="sidebar-link">orango</a></li><li><a href="/api/connection.html" class="sidebar-link">Connection</a></li><li><a href="/api/consts.html" class="sidebar-link">Constants</a></li><li><a href="/api/schema.html" class="sidebar-link">Schema</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="tips-and-tricks"><a href="#tips-and-tricks" aria-hidden="true" class="header-anchor">#</a> Tips and Tricks</h1> <p>These are some common patterns that you may want to consider using when developing
with Orango.</p> <h2 id="referencing-orango-instance"><a href="#referencing-orango-instance" aria-hidden="true" class="header-anchor">#</a> Referencing orango instance</h2> <p>Rather than referencing <code>orango</code> directly, pass it into each controller or model
via injection. Here is very simple example.</p> <p><strong>models/User.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> orango <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> schema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">orango<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
    lastName<span class="token punctuation">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> orango<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>controllers/my_controller.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span>app<span class="token punctuation">,</span> orango<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> User <span class="token operator">=</span> orango<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">)</span>

  app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>server.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> orango <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'orango'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> orango<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'myapp'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./models/User'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span>

  <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./controllers/my_controller'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> db<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="performing-raw-aql-queries"><a href="#performing-raw-aql-queries" aria-hidden="true" class="header-anchor">#</a> Performing raw AQL queries</h2> <p>If you have a query that cannot be constructed via Orango, don't let that stop you. Build it
as AQL and you can still use Orango for parts. For example, Orango cannot currently construct the
following query, so the query is passed in directly as AQL. The results are then converted to models
after getting the results from the database.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">findMatches</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> aql <span class="token operator">=</span> <span class="token template-string"><span class="token string">`LET contacts = (
    FOR contact IN contacts
        FILTER contact.user == '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'
        RETURN DISTINCT contact.email
    )
      
  FOR user IN users
      FILTER POSITION(contacts, user.email) == TRUE
      RETURN user`</span></span>
  
  <span class="token keyword">const</span> cursor <span class="token operator">=</span> <span class="token keyword">await</span> orango<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>aql<span class="token punctuation">)</span>
  <span class="token keyword">let</span> results <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// convert results from JSON to models</span>
  <span class="token keyword">return</span> User<span class="token punctuation">.</span><span class="token function">fromJSON</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tipster" data-v-6b55424b><div class="prefix 👍" data-v-6b55424b>👍</div> <div class="text" data-v-6b55424b><p data-v-6b55424b>If you find something that Orango cannot do, submit an feature request.</p></div></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/roboncode/orango/edit/master/docs/guide/best-practices.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/10/2019, 10:28:55 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/guide/working-with-models.html" class="prev">
          Working with models
        </a></span> <span class="next"><a href="/api/orango.html">
          orango
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/22.c9e27b35.js" defer></script><script src="/assets/js/4.b7431d6a.js" defer></script><script src="/assets/js/app.638713ad.js" defer></script>
  </body>
</html>
